/**
 * Dii-Helper
 * https://www.npmjs.com/package/dii-helper
 * by Attila Reterics based on D3.nest
 *
 * D3 page: https://d3js.org
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=n||self).DiiHelper=n.DiiHelper||{})}(this,function(n){if(!window.d3)throw"D3 is not defined";const e={children:"children",name:"name",nestForD3:()=>{const n=d3.map;function e(){return{}}function r(n,e,r){n[e]=r}function t(){return n()}function u(n,e,r){n.set(e,r)}var i,o,a,l=[],f=[];function s(e,r,t,u){if(r>=l.length)return null!=i&&e.sort(i),null!=o?o(e):e;for(var a,f,c,d=-1,h=e.length,y=l[r++],p=n(),m=t();++d<h;)(c=p.get(a=y(f=e[d])+""))?c.push(f):p.set(a,[f]);return p.each(function(n,e){u(m,e,s(n,r,t,u))}),m}return a={object:function(n){return s(n,0,e,r)},map:function(n){return s(n,0,t,u)},entries:function(n){return function n(e,r){if(++r>l.length)return e;var t,u=f[r-1];return null!=o&&r>=l.length?t=e.entries():(t=[],e.each(function(e,u){t.push({name:u,children:n(e,r)})})),null!=u?t.sort(function(n,e){return u(n.name,e.name)}):t}(s(n,0,t,u),0)},key:function(n){return l.push(n),a},sortKeys:function(n){return f[l.length-1]=n,a},sortValues:function(n){return i=n,a},rollup:function(n){return o=n,a}}},maxInFlare:(n,r)=>{const t=e.children,u=(n,e)=>{if(n&&"number"==typeof n[e])return n[e];if(n&&Array.isArray(n[t])){let r=0;return n[t].forEach(n=>{if(n){const t=u(n,e);t>r&&(r=t)}}),r}return n&&n.data?u(n.data,e):null};return u(n,r)},firstInFlare:(n,r)=>{const t=e.children,u=(n,e)=>{if(n&&"number"==typeof n[e])return n[e];if(n&&Array.isArray(n[t])){let r=0;return n[t].forEach((n,t)=>{n&&!t&&(r=u(n,e))}),r}return n&&n.data?u(n.data,e):null};return u(n,r)},lastInFlare:(n,r)=>{const t=e.children,u=(n,e)=>{if(n&&"number"==typeof n[e])return n[e];if(n&&Array.isArray(n[t])){let r=0;const i=n[t].length;return n[t].forEach((n,t)=>{n&&t===i-1&&(r=u(n,e))}),r}return n&&n.data?u(n.data,e):null};return u(n,r)},nestKeys:(n,r)=>{const t=e.nestForD3();return r.forEach(n=>{t.key(e=>e[n])}),t.entries(n)}};n.children=e.children,n.name=e.name,n.nestForD3=e.nestForD3,n.maxInFlare=e.maxInFlare,n.firstInFlare=e.firstInFlare,n.lastInFlare=e.lastInFlare,n.nestKeys=e.nestKeys,Object.defineProperty(n,"__esModule",{value:!0})});